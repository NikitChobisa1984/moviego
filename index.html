<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Updates</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #343a40;
            color: white;
            padding: 15px 0;
            text-align: center;
        }
        .container {
            padding: 20px;
        }
        .filters {
            margin-bottom: 20px;
        }
        .movie {
            border: 1px solid #ddd;
            margin-bottom: 10px;
            padding: 10px;
            background-color: white;
        }
        .movie-title {
            font-size: 1.5em;
            margin: 0;
        }
        .movie-description {
            margin: 10px 0;
        }
        .rating, .reviews, .trailer {
            margin: 5px 0;
        }
        .notify-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
    </style>
    <script>
        async function getMovies(query = '') {
            const genre = document.getElementById('genre').value;
            const minRating = document.getElementById('minRating').value;
            const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=YOUR_API_KEY&query=${query}`);
            const data = await response.json();
            const moviesContainer = document.getElementById('movies');
            moviesContainer.innerHTML = '';

            data.results
                .filter(movie => (genre === 'all' || movie.genre_ids.includes(parseInt(genre))) && movie.vote_average >= minRating)
                .forEach(movie => {
                    const movieElement = document.createElement('div');
                    movieElement.classList.add('movie');
                    movieElement.innerHTML = `
                        <h2 class="movie-title">${movie.title}</h2>
                        <p class="movie-description">${movie.overview}</p>
                        <p class="rating">Rating: ${movie.vote_average}</p>
                        <button class="trailer" onclick="watchTrailer('${movie.id}')">Watch Trailer</button>
                        <button class="notify-btn" onclick="notifyUser()">Notify Me!</button>
                    `;
                    moviesContainer.appendChild(movieElement);
                });
        }

        function watchTrailer(movieId) {
            // Add code to fetch and display movie trailer
            alert(`Watch trailer for movie ID: ${movieId}`);
        }

        function notifyUser() {
            if (Notification.permission === 'granted') {
                new Notification('New movie update!');
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        new Notification('New movie update!');
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => getMovies());

        function searchMovies() {
            const query = document.getElementById('searchQuery').value;
            getMovies(query);
        }
    </script>
</head>
<body>
    <header>
        <h1>Movie Updates</h1>
    </header>
    <div class="container">
        <div class="filters">
            <label for="searchQuery">Search:</label>
            <input type="text" id="searchQuery" oninput="searchMovies()">
            <label for="genre">Genre:</label>
            <select id="genre" onchange="getMovies()">
                <option value="all">All</option>
                <option value="28">Action</option>
                <option value="35">Comedy</option>
                <option value="18">Drama</option>
                <!-- Add more genres as needed -->
            </select>

            <label for="minRating">Minimum Rating:</label>
            <input type="number" id="minRating" min="0" max="10" step="0.1" value="0" onchange="getMovies()">
        </div>
        <div id="movies">
            <!-- Movies will be loaded here dynamically -->
        </div>
    </div>
</body>
</html>
